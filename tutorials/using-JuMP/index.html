<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/fall2022/libs/katex/katex.min.css"> <link rel=stylesheet  href="/fall2022/libs/highlight/github.min.css"> <script src="/fall2022/libs/clipboard.min.js"></script> <link rel=stylesheet  href="/fall2022/css/franklin.css"> <link rel=stylesheet  href="/fall2022/css/poole_hyde.css"> <link rel=stylesheet  href="/fall2022/css/custom.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <title>Tutorial: Using JuMP</title> <div class=sidebar > <div class=container > <div class=sidebar-about > <a href="https://cornell.edu"><img src="/fall2022/assets/cornell_logo_simple_white.svg" style="width: 300px; height: auto; display: inline"></a> <div style="opacity: 0.8; font-weight: bold; margin-bottom: 0.5em">BEE 4750/5750</div> <h1><a href="/fall2022/">Environmental Systems Analysis</a></h1> <p class=lead >Fall 2022</p> </div> <nav class=sidebar-nav > <a class="sidebar-nav-item " href="/fall2022/">Welcome</a> <a class="sidebar-nav-item " href="/fall2022/policies/">Policies</a> <a class="sidebar-nav-item " href="/fall2022/schedule/">Lecture Schedule</a> <a class="sidebar-nav-item " href="/fall2022/agenda/">Weekly Schedule</a> <a class="sidebar-nav-item " href="/fall2022/assignments/">Assignments and Projects</a> <a class="sidebar-nav-item " href="/fall2022/software/">Computational Tools</a> <a class="sidebar-nav-item " href="/fall2022/examples/">Julia Examples</a> <a class="sidebar-nav-item " href="/fall2022/resources/">Resources</a> </nav> </div> </div> <div class="content container"> <div class=franklin-content ><div class=banner ><h1 id=tutorial_using_jump ><a href="#tutorial_using_jump" class=header-anchor >Tutorial: Using JuMP</a></h1></div> <div class=franklin-toc ><ol><li><a href="#overview">Overview</a><li><a href="#setup">Setup</a><li><a href="#linear_programming_example_how_many_widgets_should_a_factory_produce">Linear Programming Example: How Many Widgets Should A Factory Produce?</a><ol><li><a href="#defining_the_problem">Defining The Problem</a><li><a href="#visualizing_the_problem">Visualizing the Problem</a><li><a href="#solving_this_problem_using_jump">Solving This Problem Using JuMP</a></ol></ol></div> <h2 id=overview ><a href="#overview" class=header-anchor >Overview</a></h2> <p>This tutorial will demonstrate how to use the <code>JuMP</code> package in Julia to solve linear optimization problems. It draws heavily from <a href="https://github.com/east-winds/power-systems-optimization/blob/master/Notebooks/02-Anatomy-of-a-Model.ipynb">this tutorial</a> by Jesse D. Jenkins and Michael R. Davidson.</p> <p><a href="https://jump.dev/">JuMP</a> &#40;&quot;<strong>Ju</strong>lia for <strong>M</strong>athematical <strong>P</strong>rogramming&quot;&#41; is an open-source Julia package that adds functionality for formulating and solving a variety of optimization problems. One advantage of JuMP is that its syntax matches the typical mathematical formalism used to specify optimization problems. We will use JuMP in this class for our optimization work.</p> <div class=note ><div class=title >⚠ Note</div> <div class=contents >Make sure that you take a look at the <a href="https://jump.dev/JuMP.jl/stable/"><code>JuMP</code> documentation</a> whenever you have a question or want to find out how to do something that we don&#39;t discuss in any of our notebooks &#40;or how to do it better&#33;&#41;.</div></div> <h2 id=setup ><a href="#setup" class=header-anchor >Setup</a></h2> <p>Here we will outline the basic steps for configuring JuMP, though you can also refer to the official <a href="https://jump.dev/JuMP.jl/stable/installation/#Installation-Guide">Installation Guide</a>.</p> <p>If <code>JuMP</code> is not already in your environment &#40;it will be for any of your assignments, but may not be if you&#39;re doing something independently&#41;, you will need to install it. You will also need to <a href="https://jump.dev/JuMP.jl/stable/installation/#Supported-solvers">select a solver and install the relevant package</a>. Some of these are commercial, while others are open source. Solvers are also not typically universal, as different types of optimization problems use different algorithms, so be aware of what problem you&#39;re trying to solve instead of just blindly copying code from one task to another.</p> <p>For example, for the linear programming example, we will use the Clp &#40;<a href="https://github.com/coin-or/Clp">COIN-OR Linear Programming</a>&#41; solver via the <a href="https://github.com/jump-dev/Clp.jl"><code>Clp</code></a> package. As seen on the solver table, Clp is open source &#40;via the EPL, or <a href="https://opensource.org/licenses/EPL-1.0">Eclipse Public License</a>&#41; and can solve linear programs &#40;LP&#41;. For the mixed-integer linear programming example, we will instead of the Cbc &#40;<a href="https://github.com/coin-or/Cbc">COIN-OR Branch and Cut</a>&#41; solver via the <a href="https://github.com/jump-dev/Cbc.jl"><code>Cbc</code></a> package. This is also open-source &#40;it comes from the same group as Clp&#41; and can solve mixed-integer or binary linear programs.</p> <h2 id=linear_programming_example_how_many_widgets_should_a_factory_produce ><a href="#linear_programming_example_how_many_widgets_should_a_factory_produce" class=header-anchor >Linear Programming Example: How Many Widgets Should A Factory Produce?</a></h2> <h3 id=defining_the_problem ><a href="#defining_the_problem" class=header-anchor >Defining The Problem</a></h3> <p>Suppose we own a factory that can produce two types of widgets:</p> <ul> <li><p>Widget A generates a profit of <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>A</mi></msub><mo>=</mo><mi mathvariant=normal >$</mi><mn>100</mn></mrow><annotation encoding="application/x-tex">p_A = \$100</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal">p</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.80556em;vertical-align:-0.05556em;"></span><span class=mord >$100</span></span></span></span> per widget; and</p> <li><p>Widget B generates a profit of <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>B</mi></msub><mo>=</mo><mi mathvariant=normal >$</mi><mn>75</mn></mrow><annotation encoding="application/x-tex">p_B = \$75</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal">p</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.80556em;vertical-align:-0.05556em;"></span><span class=mord >$75</span></span></span></span> per widget.</p> </ul> <p>Let <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> be the number of units of widget A that we want to produce, and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> the number of units of widget B. Our goal is to <em>maximize</em> our total profit <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>A</mi></msub><mi>x</mi><mo>+</mo><msub><mi>p</mi><mi>B</mi></msub><mi>y</mi></mrow><annotation encoding="application/x-tex">p_Ax + p_By</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal">p</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class=mord ><span class="mord mathnormal">p</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>. This is the <strong>objective function</strong>. We express this objective using the equation </p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><mi>max</mi><mo>⁡</mo><mn>100</mn><mi>x</mi><mo>+</mo><mn>75</mn><mi>y</mi><mi mathvariant=normal >.</mi></mrow><annotation encoding="application/x-tex">\max 100x + 75y.</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mop >max</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord >100</span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class=mord >75</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mord >.</span></span></span></span></span> <p>Further, we cannot build a negative number of either type of widget. This is known as a <em>non-negativity constraint</em>, and can be expressed as <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mtable rowspacing=0.2500em  columnalign="right left" columnspacing=0em ><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mi>x</mi></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mrow></mrow><mo>≥</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mi>y</mi></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mrow></mrow><mo>≥</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} x &amp;\geq 0\\ y &amp;\geq 0 \end{aligned}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:3.0000000000000004em;vertical-align:-1.2500000000000002em;"></span><span class=mord ><span class=mtable ><span class=col-align-r ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class="mord mathnormal">x</span></span></span><span style="top:-2.41em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:1.2500000000000002em;"><span></span></span></span></span></span><span class=col-align-l ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≥</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mord >0</span></span></span><span style="top:-2.41em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≥</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mord >0</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:1.2500000000000002em;"><span></span></span></span></span></span></span></span></span></span></span></span></p> <p>This isn&#39;t a very interesting problem yet&#33; We would simply build as much of both widgets as we could, because there are no constraints on our ability to produce. To make this more realistic, let&#39;s suppose that both widgets are produced using the same raw material <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>, of which we can only procure 300 units. Then, if:</p> <ul> <li><p>Widget A requires 40 units of <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> per widget, and</p> <li><p>Widget B requires 20 units of <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> per widget,</p> </ul> <p>we arrive at the following material <strong>constraint</strong>:</p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><mn>40</mn><mi>x</mi><mo>+</mo><mn>20</mn><mi>y</mi><mo>≤</mo><mn>300.</mn></mrow><annotation encoding="application/x-tex">40x + 20y \leq 300.</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mord >40</span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class=mord >20</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≤</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >300.</span></span></span></span></span> <p>But we might have another constraint: time&#33; Each widget may take a different amount of labor to produce. For example, let&#39;s say that</p> <ul> <li><p>Widget A takes 6 hours to produce and</p> <li><p>Widget B takes 12 hours to produce.</p> </ul> <p>Further, there are only 80 hours per work that can be allocated to widget production. This becomes the time constraint</p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><mn>6</mn><mi>x</mi><mo>+</mo><mn>12</mn><mi>y</mi><mo>≤</mo><mn>80.</mn></mrow><annotation encoding="application/x-tex">6x + 12y \leq 80.</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.72777em;vertical-align:-0.08333em;"></span><span class=mord >6</span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class=mord >12</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≤</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.64444em;vertical-align:0em;"></span><span class=mord >80.</span></span></span></span></span> <p>Consolidating equations &#40;1&#41;–&#40;4&#41; gives us the following <strong>constrained optimization problem</strong>: <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mtable rowspacing=0.2500em  columnalign="right left right" columnspacing="0em 1em"><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mi>max</mi><mo>⁡</mo><mn>100</mn><mi>x</mi><mo>+</mo><mn>75</mn><mi>y</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mrow></mrow><mtext>subject to</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mi>x</mi><mo>≥</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mi>y</mi><mo>≥</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mn>40</mn><mi>x</mi><mo>+</mo><mn>20</mn><mi>y</mi><mo>≤</mo><mn>300</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=0  displaystyle=true ><mrow><mn>6</mn><mi>x</mi><mo>+</mo><mn>12</mn><mi>y</mi><mo>≤</mo><mn>80</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} &amp; &amp;\max 100x + 75y\\ &amp;\text{subject to} &amp; \\ &amp; &amp; x \geq 0\\ &amp; &amp; y \geq 0 \\ &amp; &amp; 40x + 20y \leq 300\\ &amp; &amp; 6x + 12y \leq 80 \end{aligned}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:9.000000000000002em;vertical-align:-4.250000000000001em;"></span><span class=mord ><span class=mtable ><span class=col-align-r ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:4.750000000000001em;"><span style="top:-6.750000000000001em;"><span class=pstrut  style="height:2.84em;"></span><span class=mord ></span></span><span style="top:-5.25em;"><span class=pstrut  style="height:2.84em;"></span><span class=mord ></span></span><span style="top:-3.749999999999999em;"><span class=pstrut  style="height:2.84em;"></span><span class=mord ></span></span><span style="top:-2.249999999999999em;"><span class=pstrut  style="height:2.84em;"></span><span class=mord ></span></span><span style="top:-0.7499999999999996em;"><span class=pstrut  style="height:2.84em;"></span><span class=mord ></span></span><span style="top:0.7500000000000009em;"><span class=pstrut  style="height:2.84em;"></span><span class=mord ></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:4.250000000000001em;"><span></span></span></span></span></span><span class=col-align-l ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:4.750000000000001em;"><span style="top:-6.910000000000001em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span></span></span><span style="top:-5.41em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span><span class="mord text"><span class=mord >subject to</span></span></span></span><span style="top:-3.9099999999999993em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span></span></span><span style="top:-2.4099999999999993em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span></span></span><span style="top:-0.9099999999999997em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span></span></span><span style="top:0.5900000000000007em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord ></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:4.250000000000001em;"><span></span></span></span></span></span><span class=arraycolsep  style="width:1em;"></span><span class=col-align-r ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:4.750000000000001em;"><span style="top:-6.910000000000001em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mop >max</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord >100</span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mord >75</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-5.41em;"><span class=pstrut  style="height:3em;"></span><span class=mord ></span></span><span style="top:-3.9099999999999993em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≥</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mord >0</span></span></span><span style="top:-2.4099999999999993em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≥</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mord >0</span></span></span><span style="top:-0.9099999999999997em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >40</span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mord >20</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≤</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mord >300</span></span></span><span style="top:0.5900000000000007em;"><span class=pstrut  style="height:3em;"></span><span class=mord ><span class=mord >6</span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mord >12</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >≤</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mord >80</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:4.250000000000001em;"><span></span></span></span></span></span></span></span></span></span></span></span></p> <h3 id=visualizing_the_problem ><a href="#visualizing_the_problem" class=header-anchor >Visualizing the Problem</a></h3> <p>Let&#39;s do some plotting to examine the geometry of our optimization problem. We can do this using the <a href="https://docs.juliaplots.org/latest/"><code>Plots</code></a> package in Julia.</p> <pre><code class="julia hljs"><span class=hljs-comment ># set up objective function parameters and variables</span>
pa = <span class=hljs-number >100</span>
pb = <span class=hljs-number >75</span>
a = range(<span class=hljs-number >0</span>, <span class=hljs-number >8</span>, step=<span class=hljs-number >0.25</span>)
b = range(<span class=hljs-number >0</span>, <span class=hljs-number >8</span>, step=<span class=hljs-number >0.25</span>)

<span class=hljs-comment ># define objective function</span>
f(a, b) = pa * a + pb * b</code></pre><pre><code class="plaintext hljs">f (generic function with 1 method)</code></pre>
<pre><code class="julia hljs"><span class=hljs-comment ># start plotting</span>
<span class=hljs-keyword >using</span> Plots

contour(a,b,(a,b)-&gt;f(a,b),nlevels=<span class=hljs-number >15</span>, c=:heat, linewidth=<span class=hljs-number >10</span>, colorbar = <span class=hljs-literal >false</span>, contour_labels = <span class=hljs-literal >true</span>) <span class=hljs-comment ># objective function contours</span>
title!(<span class=hljs-string >&quot;Factory Optimization Problem&quot;</span>) <span class=hljs-comment ># add title</span>
xaxis!(<span class=hljs-string >&quot;x=Widget A&quot;</span>, lims=(<span class=hljs-number >0</span>, maximum(a))) <span class=hljs-comment ># add x-axis title and limits</span>
yaxis!(<span class=hljs-string >&quot;y=Widget B&quot;</span>, lims=(<span class=hljs-number >0</span>, maximum(b))) <span class=hljs-comment ># add y-axis title and limits</span>
xticks!(<span class=hljs-number >0</span>:maximum(a)) <span class=hljs-comment ># set x-axis ticks</span>
yticks!(<span class=hljs-number >0</span>:maximum(b)) <span class=hljs-comment ># set y-axis ticks</span>
areaplot!(a[a.&lt;=<span class=hljs-number >11</span>], (<span class=hljs-number >300</span> .- <span class=hljs-number >40</span>*a)./<span class=hljs-number >20</span>, legend=<span class=hljs-literal >false</span>, opacity=<span class=hljs-number >0.3</span>) <span class=hljs-comment ># plot materials constraint feasible region</span>
areaplot!(a[a.&lt;=<span class=hljs-number >8</span>], (<span class=hljs-number >80</span> .- <span class=hljs-number >6</span>*a)./<span class=hljs-number >12</span>, legend=<span class=hljs-literal >false</span>, opacity=<span class=hljs-number >0.3</span>) <span class=hljs-comment ># plot time constraint feasible region</span></code></pre>
<img src="/fall2022/assets/tutorials/using-JuMP/code/output/lp-visualize.png" alt="">
<p>We can see exactly where the solution will be, at the intersection of the feasible regions imposed by the two constraints &#40;note how this is related to the gradient of the objective function&#41;&#33;  Let&#39;s now use JuMP to identify the location of this point &#40;though we could also solve for it using linear algebra&#41;.</p>
<h3 id=solving_this_problem_using_jump ><a href="#solving_this_problem_using_jump" class=header-anchor >Solving This Problem Using JuMP</a></h3>
<h4 id=setting_up_the_model_and_solver ><a href="#setting_up_the_model_and_solver" class=header-anchor >Setting Up the Model and Solver</a></h4>
<p>First, we should load <code>JuMP</code> and <code>Clp</code>.</p>
<pre><code class="julia hljs"><span class=hljs-keyword >using</span> JuMP
<span class=hljs-keyword >using</span> Clp</code></pre>
<p>To solve our problem, first we need to <strong>define the model</strong>. The <em>model object</em> has lots of attributes, including the variables, constraints, solver options, etc. We create a new model using the <code>Model&#40;&#41;</code> function. Since we are using the <code>Clp</code> solver, we need to tell JuMP to use the <code>Clp.Optimizer</code> solver function.</p>
<pre><code class="julia hljs">factory_model = Model(Clp.Optimizer)</code></pre><pre><code class="plaintext hljs">A JuMP Model
Feasibility problem with:
Variables: 0
Model mode: AUTOMATIC
CachingOptimizer state: EMPTY_OPTIMIZER
Solver name: Clp</code></pre>
<p>There are a bunch of attributes and options that we could set, but we won&#39;t in this example. If needed, look at the <code>Clp.jl</code> <a href="https://github.com/jump-dev/Clp.jl">documentation</a>.</p>
<h4 id=define_variables ><a href="#define_variables" class=header-anchor >Define Variables</a></h4>
<p>Decision variables &#40;<span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> in this case&#41; in JuMP are defined using the <code>@variable</code> macro. The first argument passed to <code>@variable&#40;&#41;</code> is the model object, in this case, <code>factory_model</code>, and the second argument are bounds on that variable, created using <code>&gt;&#61;</code> and <code>&lt;&#61;</code>. JuMP will interpret the bound specification to obtain the variable name. In this case, our only bounds directly on the variables are the non-negativity constraints.</p>
<pre><code class="julia hljs"><span class=hljs-meta >@variable</span>(factory_model, x &gt;= <span class=hljs-number >0</span>)</code></pre><pre><code class="plaintext hljs">x</code></pre>
<pre><code class="julia hljs"><span class=hljs-meta >@variable</span>(factory_model, y &gt;= <span class=hljs-number >0</span>)</code></pre><pre><code class="plaintext hljs">y</code></pre>
<p>If we had a free &#40;or unbounded&#41; variable <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span>, we could declare that variable using <code>@variable&#40;model, z&#41;</code>. JuMP also requires unique names for each variable, or it will throw an error. This is one place where it&#39;s nice that Julia lets us use sub- and superscripts in variable names&#33;</p>
<p>If we did want to modify the bounds after defining the variable, we could do so using the <code>set_lower_bound</code> and <code>set_upper_bound</code> functions, or we could remove them using <code>delete_lower_bound</code> and <code>delete_upper_bound</code>.</p>
<p>Finally, if we want to see all of the variables associated with a model, we can use the <code>all_variables</code> function to obtain an array.</p>
<pre><code class="julia hljs">all_variables(factory_model)</code></pre><pre><code class="plaintext hljs">2-element Vector{JuMP.VariableRef}:
 x
 y</code></pre>
<h4 id=define_constraints ><a href="#define_constraints" class=header-anchor >Define Constraints</a></h4>
<p>When defining variables, we were able to declare constraints on their values by specifying upper and lower bounds. However, we also have other constraints, which involve multiple decision variables. These are specified using the <code>@constraint</code> macro. Unlike variables, we also need to pass names for each constraint. We will use <code>time</code> for the time constraint and <code>materials</code> for the materials constraint. These names must be unique.</p>
<pre><code class="julia hljs"><span class=hljs-meta >@constraint</span>(factory_model, time, <span class=hljs-number >6</span>x + <span class=hljs-number >12</span>y &lt;= <span class=hljs-number >80</span>) <span class=hljs-comment ># specify the time constraint</span></code></pre><pre><code class="plaintext hljs">time : 6 x + 12 y ≤ 80.0</code></pre>
<pre><code class="julia hljs"><span class=hljs-meta >@constraint</span>(factory_model, materials, <span class=hljs-number >40</span>x + <span class=hljs-number >20</span>y &lt;= <span class=hljs-number >300</span>) <span class=hljs-comment ># materials constraint</span></code></pre><pre><code class="plaintext hljs">materials : 40 x + 20 y ≤ 300.0</code></pre>
<h4 id=define_objective_function ><a href="#define_objective_function" class=header-anchor >Define Objective Function</a></h4>
<p>So far, we&#39;ve defined the feasible region of the decision-variable domain by setting the constraints. But we need to specify our objective function to know what we are trying to minimize or maximize over this region. We define the objective function using the <code>@objective</code> macro. In addition to specifying the model objective and the function, we need to tell JuMP whether we want to minimize or maximize.</p>
<pre><code class="julia hljs"><span class=hljs-meta >@objective</span>(factory_model, Max, <span class=hljs-number >100</span>x + <span class=hljs-number >75</span>y)</code></pre><pre><code class="plaintext hljs">100 x + 75 y</code></pre>
<p>Now, let&#39;s look at the model specification.</p>
<pre><code class="julia hljs">print(factory_model)</code></pre><pre><code class="plaintext hljs">Max 100 x + 75 y
Subject to
 time : 6 x + 12 y ≤ 80.0
 materials : 40 x + 20 y ≤ 300.0
 x ≥ 0.0
 y ≥ 0.0
</code></pre>
<p>We can also get a nicely styled LaTeX version, which might be useful.</p>
<pre><code class="julia hljs">latex_formulation(factory_model)</code></pre><pre><code class="plaintext hljs">$$ \begin{aligned}
\max\quad &amp; 100 x + 75 y\\
\text{Subject to} \quad &amp; 6 x + 12 y \leq 80.0\\
 &amp; 40 x + 20 y \leq 300.0\\
 &amp; x \geq 0.0\\
 &amp; y \geq 0.0\\
\end{aligned} $$</code></pre>
<p>We won&#39;t go into detail here, but there are other ways to define the model, which are detailed in the <a href="https://jump.dev/JuMP.jl/stable/">JuMP documentation</a>. For example, we can specify multiple variables using <a href="https://jump.dev/JuMP.jl/stable/manual/variables/#variables"><code>@variables</code></a>. Similarly, we can use <a href="https://jump.dev/JuMP.jl/stable/manual/constraints/#The-@constraints-macro"><code>@constraints</code></a> to define multiple constraints at once. Or we can use <a href="https://jump.dev/JuMP.jl/stable/tutorials/Getting&#37;20started/variables_constraints_objective/#Constraints-in-a-loop">loops</a> to define multiple constraints or constraints involving many variables. We can also specify the model in <a href="https://jump.dev/JuMP.jl/stable/tutorials/Getting&#37;20started/variables_constraints_objective/#Vectorized-syntax">vectorized syntax</a>, which is similar to how linear programs are specified in MATLAB.</p>
<h4 id=solve_the_model ><a href="#solve_the_model" class=header-anchor >Solve the Model</a></h4>
<p>Now it&#39;s time to solve the model and find the optimal values <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy=false >(</mo><msup><mi>x</mi><mo>∗</mo></msup><mo separator=true >,</mo><msup><mi>y</mi><mo>∗</mo></msup><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">(x^*, y^*)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class=mord ><span class="mord mathnormal">x</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class=mclose >)</span></span></span></span>. Since we specified the solver when we initialized <code>factory_model</code>, all we have to do is call the <code>optimize&#33;</code> function.</p>
<pre><code class="julia hljs">optimize!(factory_model)</code></pre>
<h4 id=query_the_solution ><a href="#query_the_solution" class=header-anchor >Query the Solution</a></h4>
<p>To find the optimal values of our decision variables, we need to query the values of the variables using <code>value.&#40;&#41;</code>. We use <code>value.&#40;&#41;</code> &#40;the vectorized version of <code>value&#40;&#41;</code>&#41; because JuMP stores decision variables differently depending on their number and how they were defined. Uses the dot-syntax here works with any model specification, while the plain <code>value&#40;&#41;</code> will not work if a queried decision variable is stored as a vector.</p>
<pre><code class="julia hljs">value.(x)</code></pre><pre><code class="plaintext hljs">5.555555555555555</code></pre>
<pre><code class="julia hljs">value.(y)</code></pre><pre><code class="plaintext hljs">3.8888888888888884</code></pre>
<p>So we can see that our optimal inputs are </p>
<span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><mo stretchy=false >(</mo><msup><mi>x</mi><mo>∗</mo></msup><mo separator=true >,</mo><msup><mi>y</mi><mo>∗</mo></msup><mo stretchy=false >)</mo><mo>=</mo><mo stretchy=false >(</mo><mn>5.56</mn><mo separator=true >,</mo><mn>3.89</mn><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">(x^*, y^*) = (5.56, 3.89)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class=mord ><span class="mord mathnormal">x</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class=mclose >)</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class=mord >5.56</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord >3.89</span><span class=mclose >)</span></span></span></span></span>
<p>&#40;and we&#39;ll pretend that we can manufacture and sell parts of widgets&#41;.</p>
<h4 id=visualize_the_solution ><a href="#visualize_the_solution" class=header-anchor >Visualize the Solution</a></h4>
<p>Let&#39;s take our previous plot and add the solution point to make sure that we got the solution we expected.</p>
<pre><code class="julia hljs"><span class=hljs-comment ># replot the previous plot</span>
contour(a,b,(a,b)-&gt;f(a,b),nlevels=<span class=hljs-number >15</span>, c=:heat, linewidth=<span class=hljs-number >10</span>, colorbar = <span class=hljs-literal >false</span>, contour_labels = <span class=hljs-literal >true</span>) <span class=hljs-comment ># objective function contours</span>
title!(<span class=hljs-string >&quot;Factory Optimization Problem&quot;</span>) <span class=hljs-comment ># add title</span>
xaxis!(<span class=hljs-string >&quot;x=Widget A&quot;</span>, lims=(<span class=hljs-number >0</span>, maximum(a))) <span class=hljs-comment ># add x-axis title and limits</span>
yaxis!(<span class=hljs-string >&quot;y=Widget B&quot;</span>, lims=(<span class=hljs-number >0</span>, maximum(b))) <span class=hljs-comment ># add y-axis title and limits</span>
xticks!(<span class=hljs-number >0</span>:maximum(a)) <span class=hljs-comment ># set x-axis ticks</span>
yticks!(<span class=hljs-number >0</span>:maximum(b)) <span class=hljs-comment ># set y-axis ticks</span>
areaplot!(a, (<span class=hljs-number >300</span> .- <span class=hljs-number >40</span>*a)./<span class=hljs-number >20</span>, legend=<span class=hljs-literal >false</span>, opacity=<span class=hljs-number >0.3</span>) <span class=hljs-comment ># plot materials constraint feasible region</span>
areaplot!(a, (<span class=hljs-number >80</span> .- <span class=hljs-number >6</span>*a)./<span class=hljs-number >12</span>, legend=<span class=hljs-literal >false</span>, opacity=<span class=hljs-number >0.3</span>) <span class=hljs-comment ># plot time constraint feasible region</span>

<span class=hljs-comment ># now we plot the solution that we obtained</span>
scatter!([value.(x)],[value.(y)], markercolor=<span class=hljs-string >&quot;blue&quot;</span>)</code></pre>
<img src="/fall2022/assets/tutorials/using-JuMP/code/output/lp-sol-visualize.png" alt="">
<p>The solution </p>
<span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><mo stretchy=false >(</mo><msup><mi>x</mi><mo>∗</mo></msup><mo separator=true >,</mo><msup><mi>y</mi><mo>∗</mo></msup><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">(x^*, y^*)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class=mord ><span class="mord mathnormal">x</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class=mclose >)</span></span></span></span></span>
<p>is exactly where we deduced it would be geometrically.</p>
<h4 id=other_stuff_we_can_do ><a href="#other_stuff_we_can_do" class=header-anchor >Other Stuff We Can Do</a></h4>
<p>We can also use <code>value.&#40;&#41;</code> to evaluate our constraints without manually using the equations.</p>
<pre><code class="julia hljs">value.(time)</code></pre><pre><code class="plaintext hljs">80.0</code></pre>
<pre><code class="julia hljs">value.(materials)</code></pre><pre><code class="plaintext hljs">300.0</code></pre>
<p>What if we also want the optimal objective value? We can obtain this using <code>objective_value&#40;&#41;</code>.</p>
<pre><code class="julia hljs">objective_value(factory_model)</code></pre><pre><code class="plaintext hljs">847.2222222222222</code></pre>
<p>We could also define other expressions via the <a href="https://jump.dev/JuMP.jl/stable/expressions/#JuMP.@expression"><code>@expression</code> macro</a> as functions of the decision variables and evaluate those. For example, let&#39;s say that we wanted to know the total number of widgets we&#39;d produce under our optimal allocation of resources.</p>
<pre><code class="julia hljs"><span class=hljs-meta >@expression</span>(factory_model, total_widgets, x+y)</code></pre><pre><code class="plaintext hljs">x + y</code></pre>
<pre><code class="julia hljs">value.(total_widgets)</code></pre><pre><code class="plaintext hljs">9.444444444444443</code></pre>
<h4 id=dual_solutions ><a href="#dual_solutions" class=header-anchor >Dual Solutions</a></h4>
<p>We can identify if our model has a dual solution by calling <code>has_duals&#40;&#41;</code>.</p>
<pre><code class="julia hljs">has_duals(factory_model)</code></pre><pre><code class="plaintext hljs">true</code></pre>
<p>If we want to know the dual solution associated with a constraint, we use the <code>shadow_price&#40;&#41;</code> function.</p>
<pre><code class="julia hljs">shadow_price(time)</code></pre><pre><code class="plaintext hljs">2.7777777777777786</code></pre>
<pre><code class="julia hljs">shadow_price(materials)</code></pre><pre><code class="plaintext hljs">2.083333333333333</code></pre>
<p>If the binding constraint was a variable bound, we could also query that shadow price by calling <code>reduced_cost&#40;&#41;</code> on the variable.</p>
<pre><code class="julia hljs">reduced_cost(x)</code></pre><pre><code class="plaintext hljs">-0.0</code></pre>
<pre><code class="julia hljs">reduced_cost(y)</code></pre><pre><code class="plaintext hljs">-0.0</code></pre>
<p>In this case, the relevant shadow prices are zero because the optimum is in the interior of the domain. If we had added a strong enough upper bound on the value&#40;s&#41; of one or both of our decision variables &#40;say, x &lt;&#61; 4&#41;, then this would be non-zero.</p>

<div class=page-foot >
  <div class=copyright >
    <a href="https://github.com/vsrikrish/environmental-systems-analysis/"><b><img class=github-logo  src="https://unpkg.com/ionicons@5.1.2/dist/svg/logo-github.svg"> repository for this site.</b></a>

    Last modified: June 04, 2025. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
    </div>  
    
        



    
    
        


        

<script>
    (function(){
    
        // Get the elements.
        // - the 'pre' element.
        // - the 'div' with the 'paste-content' id.
    
        var pre = document.getElementsByTagName('pre');
    
        // Add a copy button in the 'pre' element.
        // which only has the className of 'language-'.
    
        for (var i = 0; i < pre.length; i++) {
            var isLanguage = pre[i].children[0].className.indexOf('language-');
    
            if ( isLanguage === 0 ) {
                var button           = document.createElement('button');
                        button.className = 'copy-button';
                        button.textContent = 'Copy';
    
                        pre[i].appendChild(button);
            }
        };
    
        // Run Clipboard
    
        var copyCode = new Clipboard('.copy-button', {
            target: function(trigger) {
                return trigger.previousElementSibling;
        }
        });
    
        // On success:
        // - Change the "Copy" text to "Copied".
        // - Swap it to "Copy" in 2s.
        // - Lead user to the "contenteditable" area with Velocity scroll.
    
        copyCode.on('success', function(event) {
            event.clearSelection();
            event.trigger.textContent = 'Copied';
            window.setTimeout(function() {
                event.trigger.textContent = 'Copy';
            }, 2000);
    
        });
    
        // On error (Safari):
        // - Change the  "Press Ctrl+C to copy"
        // - Swap it to "Copy" in 2s.
    
        copyCode.on('error', function(event) {
            event.trigger.textContent = 'Press "Ctrl + C" to copy';
            window.setTimeout(function() {
                event.trigger.textContent = 'Copy';
            }, 5000);
        });
    
    })();
</script>